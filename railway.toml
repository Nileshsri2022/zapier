# Railway Monorepo Configuration
# This file tells Railway how to build each service

[build]
builder = "NIXPACKS"
buildCommand = "npm install && cd packages/db && npx prisma generate"

[deploy]
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Service configurations
[[services]]
name = "processor"
root = "/"
startCommand = "cd apps/processor && npm run start"

[[services]]
name = "worker"
root = "/"
startCommand = "cd apps/worker && npm run start"
